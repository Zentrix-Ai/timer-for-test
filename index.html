<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NEXON Chrono</title>
<style>
:root{--accent: rgba(255,255,255,0.9);}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
body{
  display:flex;flex-direction: column;justify-content: center;align-items:center;
  padding:28px;
  background: linear-gradient(120deg,#ff4d6d 0%, #ff7a00 25%, #6bffd6 55%, #2b6bff 100%);
  background-size: 300% 300%;
  animation: bg 10s linear infinite;
  color:var(--accent);
  min-height: 100vh;
  transition: all 0.5s ease;
}
@keyframes bg{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.card{width:min(720px,96%);max-width:720px;padding:28px;border-radius:18px;
  background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  box-shadow: 0 8px 30px rgba(0,0,0,0.25);
  backdrop-filter: blur(8px) saturate(120%);
  border: 1px solid rgba(255,255,255,0.06);
  display:flex;gap:28px;align-items:center;justify-content:space-between;
  transition: all 0.5s ease;
}
.left{display:flex;flex-direction:column;gap:16px;min-width:220px;flex: 1;transition: all 0.5s ease;}
h1{margin:0;font-size:clamp(20px,3vw,28px);display:flex;gap:12px;align-items:center;}
.btn{padding:12px 18px;border-radius:12px;border:none;cursor:pointer;font-weight:600;
  font-size:15px;transition:transform .14s ease, box-shadow .14s ease;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  color:var(--accent);}
.btn:active{transform:translateY(1px) scale(.998)}
.btn-primary{background: linear-gradient(90deg, rgba(0,0,0,0.2), rgba(255,255,255,0.06));}
.btn-danger{background: linear-gradient(90deg, rgba(255,80,80,0.12), rgba(255,40,40,0.08));}
.display{flex:1;display:flex;align-items:center;justify-content:center;width:100%;transition: all 0.5s ease;}
.clock{background: linear-gradient(180deg, rgba(0,0,0,0.22), rgba(255,255,255,0.02));
  padding:28px 38px;border-radius:14px;text-align:center;min-width:240px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.28);
  transition: all 0.5s ease;}
.time{font-size:clamp(46px, 8vw, 84px);font-weight:700;margin:0;color: white;transition: font-size 0.5s ease;}
.label{margin-top:10px;font-size:14px;color:rgba(255,255,255,0.9);}
.controls{display:flex;gap:14px;margin-top:20px;justify-content:center;}
copyright{margin-top:30px;text-align:center;width:100%;font-size:14px;color:rgba(255,255,255,0.7);}

/* Exam Mode enlarges clock */
body.exam-mode .card {
  flex-direction: column;
  align-items: center;
  gap: 40px;
  padding: 60px 80px;
  width: auto;
  max-width: unset;
  min-width: fit-content;
}
body.exam-mode .left { display: none; }
body.exam-mode .clock {
  padding: 60px 80px;
  width: auto;
  min-width: fit-content;
  max-width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}
body.exam-mode .time {
  font-size: clamp(100px, 18vw, 220px);
  line-height: 1.2; 
  white-space: nowrap; 
}

/* Flash effect when time is up */
@keyframes flash-bg {
  0%, 100% { background: #ff0000; }
  50% { background: #ffffff; }
}
body.timeup {
  animation: flash-bg 0.5s infinite; /* keep flashing until stopped */
}
</style>
</head>
<body>
<main class="card" id="mainCard">
  <div class="left" id="setupSection">
    <h1>üéõÔ∏è NEXON Chrono</h1>
    <div class="input-row">
      <input id="timeInput" type="number" min="1" placeholder="Duration (e.g. 90)" />
      <select id="unit">
        <option value="s">Seconds</option>
        <option value="m" selected>Minutes</option>
        <option value="h">Hours</option>
      </select>
      <button class="btn btn-primary" id="startBtn">Start</button>
      <button class="btn btn-danger" id="stopBtn">Stop</button>
      <button class="btn" id="resetBtn">Reset</button>
      <button class="btn" id="examModeBtn">Exam Mode</button>
    </div>
  </div>

  <div class="display">
    <div class="clock" id="clock">
      <div id="timeText" class="time">00:00</div>
      <div class="label" id="status">Ready</div>
      <div class="controls" id="examControls" style="display:none;">
        <button class="btn btn-primary" id="examStart">Start</button>
        <button class="btn btn-danger" id="examStop">Stop</button>
        <button class="btn" id="examReset">Reset</button>
        <button class="btn" id="examExit">Exit</button>
      </div>
    </div>
  </div>
</main>

<div class="copyright">
NEXON SOFTWARE - by Divan Barnard &copy; 2025
</div>

<script>
let totalSeconds = 0;
let remaining = 0;
let timerHandle = null;
let timeUpAudio = null;
const announced = new Set();

const timeText = document.getElementById('timeText');
const status = document.getElementById('status');
const input = document.getElementById('timeInput');
const unit = document.getElementById('unit');
const startBtn = document.getElementById('startBtn');
const stopBtn = document.getElementById('stopBtn');
const resetBtn = document.getElementById('resetBtn');
const examModeBtn = document.getElementById('examModeBtn');
const examControls = document.getElementById('examControls');
const setupSection = document.getElementById('setupSection');

// Map exact seconds to MP3 files
const audioAnnouncements = {
  9000: "2h30.mp3",  // 2h30
  7200: "2h.mp3",    // 2h
  5400: "1h30.mp3",  // 1h30
  3600: "1h.mp3",    // 1h
  2700: "45m.mp3",   // 45 min
  1800: "30m.mp3",   // 30 min
  900:  "15m.mp3",   // 15 min
  600:  "10m.mp3",   // 10 min
  300:  "5m.mp3"     // 5 min
};

function playAudio(fileName){
  const audio = new Audio(`audio/${fileName}`);
  audio.play();
}

function checkReminders(){
  if (announced.has(remaining)) return;
  if (audioAnnouncements[remaining]){
    announced.add(remaining);
    playAudio(audioAnnouncements[remaining]);
  }
}

function playTimeUp(){
  if (timeUpAudio) return;
  timeUpAudio = new Audio("audio/time_up.mp3");
  timeUpAudio.loop = true;
  timeUpAudio.play();
  document.body.classList.add("timeup");
}

function stopTimeUp(){
  if (timeUpAudio){
    timeUpAudio.pause();
    timeUpAudio.currentTime = 0;
    timeUpAudio = null;
  }
  document.body.classList.remove("timeup");
}

function formatTime(sec){
  if (sec <=0) return "00:00";
  const h = Math.floor(sec/3600);
  const m = Math.floor((sec%3600)/60);
  const s = sec%60;
  return h>0? `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`
            : `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}

function tick(){
  if (remaining <=0){
    clearInterval(timerHandle);
    timerHandle=null;
    status.textContent = "‚è∞ Time's up!";
    timeText.textContent="00:00";
    playTimeUp();
    return;
  }
  checkReminders();
  remaining--;
  timeText.textContent = formatTime(remaining);
  status.textContent = "Running";
}

function start(secs){
  if (!timerHandle){
    if (secs){ totalSeconds = remaining = secs; }
    if (!remaining){ alert("Please enter a time."); return; }
    timeText.textContent = formatTime(remaining);
    status.textContent="Running";
    timerHandle = setInterval(tick,1000);
  }
}

function stop(){
  if (timerHandle){ clearInterval(timerHandle); timerHandle=null; status.textContent="‚è∏Ô∏è Paused"; }
  stopTimeUp();
}

function reset(){
  stop();
  remaining=totalSeconds;
  timeText.textContent=formatTime(remaining);
  status.textContent="Reset";
  announced.clear();
}

// Normal mode
startBtn.addEventListener('click', ()=>{
  const raw = Number(input.value);
  if (!raw || raw<=0){ alert("Enter a valid number."); return; }
  let secs = raw*(unit.value==="m"?60:unit.value==="h"?3600:1);
  start(secs);
});
stopBtn.addEventListener('click', stop);
resetBtn.addEventListener('click', reset);

// Exam mode
examModeBtn.addEventListener('click', ()=>{
  const raw = Number(input.value);
  let secs = raw>0? raw*(unit.value==="m"?60:unit.value==="h"?3600:1):3600;
  totalSeconds=remaining=secs;
  document.body.classList.add("exam-mode");
  setupSection.style.display="none";
  examControls.style.display="flex";
  timeText.textContent=formatTime(remaining);
  status.textContent="Exam Mode Ready";
});
document.getElementById('examStart').addEventListener('click', ()=> start());
document.getElementById('examStop').addEventListener('click', stop);
document.getElementById('examReset').addEventListener('click', reset);
document.getElementById('examExit').addEventListener('click', ()=>{
  stop();
  document.body.classList.remove("exam-mode");
  setupSection.style.display="flex";
  examControls.style.display="none";
  timeText.textContent="00:00";
  status.textContent="Ready";
  input.value="";
  announced.clear();
});

// Fullscreen toggle
document.addEventListener('keydown',(e)=>{
  if (e.key==="F11" || e.key==="g"){
    e.preventDefault();
    if (!document.fullscreenElement) document.documentElement.requestFullscreen();
    else document.exitFullscreen();
  }
});

timeText.textContent="00:00";
status.textContent="Ready";
</script>
</body>
</html>




